<!Doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bytesized&family=Tektur:wght@400..900&display=swap" rel="stylesheet">
    <style>

        * {
            font-family: tektur, sans-serif;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        .logo {
            display: flex;
            align-items: center;
        }

        .logo img:hover{
            cursor: pointer;
            box-shadow: 0 0 20px #E3B23C, 0 0 30px #36A5A5;
        }

        .logo img {
            height: 50px;
            margin-right: 10px;
            filter: drop-shadow(0 0 10px #E3B23C);
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #E3B23C;
        }

        .header-options {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .header-options ul {
            list-style: none;
            margin: 0;
            padding: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .header-options ul li {
            margin: 0 10px;
            font-size: 18px;
            font-weight: bold;
        }
        .header-options ul li a {
            color: #F3E9DC;
            text-decoration: none;
        }
        .header-options ul li:hover {
            font-size: 22px;
        }
        .header-options ul li:hover a {
            color: #E3B23C;
        }

        .tektur-<uniquifier> {
            font-family: "Tektur", sans-serif;
            font-optical-sizing: auto;
            font-weight: <weight>;
            font-style: normal;
            font-variation-settings:
            "wdth" 100;
        }

        footer {
            margin-top: 15px;
            background: rgba(0, 0, 0, 0.8);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            padding: 20px;
        }

        .footer-content {
            text-align: center;
            font-size: 20px;
            color: #F3E9DC;
        }

       .footer-links {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 10px;
        }

       .footer-links img {
            margin: 0 10px;
            cursor: pointer;
            width: 80px;
            height: 70px;
       }

       .footer-links img:hover {
            filter: drop-shadow(0 0 10px #E3B23C);
       }

       /* CSS for the course creation form */
       body {
           background: url('https://cdn.dribbble.com/userupload/21603418/file/original-1bf20077489beeac88818f2d4591390e.gif');
           background-position: center;
           background-size: cover;
           color: #F3E9DC;
       }

       h1 {
           text-align: center;
           font-size: 36px;
           margin-top: 50px;
           color: #E3B23C;
       }

       form {
           display: flex;
           flex-direction: column;
           align-items: center;
           margin-top: 50px;
       }

       label {
           margin-top: 10px;
           font-size: 20px;
       }

       input[type="text"], textarea, select {
           width: 250px;
           padding: 10px;
           margin-top: 10px;
           border-radius: 10px;
           border: none;
           background-color: #d827a3;
           font-size: 18px;
           border: #E3B23C 2px solid;
       }

       input[type="file"] {
           margin-top: 10px;
           border-radius: 5px;
           border: none;
           background-color: #E3B23C;
           color: black;
           font-size: 18px;
           cursor: pointer;
       }

       button {
           margin-top: 20px;
           padding: 10px 20px;
           border-radius: 10px;
           border: none;
           color: #F3E9DC;
           font-size: 24px;
           cursor: pointer;
           background: linear-gradient(90deg, #36A5A5, #e4aa25);
           transform: translateX(430px);
           
       }

       button:hover {
           background: linear-gradient(90deg, #e4aa25, #36A5A5);
           filter: drop-shadow(0 0 10px #E3B23C);
        }
    </style>
    
</head>
<header>
    <div class="logo">
        <img src="img/image.png" alt="SkillHive Logo">
        <div class="logo-text" href="#">SKILLHIVE</div>
    </div>
    <nav class="header-options">
        <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">Courses</a></li>
            <li><a href="#">About</a></li>
            <li><a href="login.html">Login</a></li>
        </ul>
    </nav>
</header>
<body>
<h1>Course Creation</h1>

<form id="course-form" method="post" enctype="multipart/form-data">
    <label for="course-title">Course Title:</label>
    <input type="text" id="course-title" name="course-title" required>
    <br>

    <label for="course-description">Course Description:</label>
    <textarea id="course-description" name="course-description" required></textarea>
    <br>

    <label for="course-image">Course Image:</label>
    <input type="file" id="course-image" name="course-image" required>
    <br>

    <label for="course-type">Course Type:</label>
    <select id="course-type" name="course-type" required>
        <option value="default">Select Course Type</option>
        <option value="web development">Web Development</option>
        <option value="graphic design">Graphic Design</option>
        <option value="digital marketing">Business</option>
    </select>
    <br>

    <label for="course-video">Course Video:</label>
    <input type="file" id="course-video" name="course-video" required>
    <br>

    <label for="course-notes">Course Notes:</label>
    <input type="file" id="course-notes" name="course-notes" required>
    <br>

    <button type="submit">Create Course</button>
</form>
    <br>
    <br>
    <p>Note: Please ensure that the course image and video are in the correct format and size. The video should be no longer than 10 minutes and the image should be no larger than 100KB.</p>

<script>
    document.getElementById("course-form").addEventListener("submit", async function (e) {
        e.preventDefault();

        const form = e.target;
        const formData = new FormData(form);

        // Rename keys to match backend expectations
        formData.set("title", formData.get("course-title"));
        formData.set("description", formData.get("course-description"));
        formData.set("type", formData.get("course-type"));
        formData.set("image", formData.get("course-image"));
        formData.set("video", formData.get("course-video"));
        formData.set("notes", formData.get("course-notes"));

        // Remove the old keys
        formData.delete("course-title");
        formData.delete("course-description");
        formData.delete("course-type");
        formData.delete("course-image");
        formData.delete("course-video");
        formData.delete("course-notes");

        const token = localStorage.getItem("jwtToken");

        if (!token || token.split('.').length !== 3) {
            alert("Invalid or missing token. Please log in again.");
            return;
        }

        try {
            const response = await fetch("http://localhost:8080/api/teacher/upload-course", {
                method: "POST",
                headers: {
                    Authorization: "Bearer " + token
                },
                body: formData
            });

            if (response.ok) {
                alert("Course uploaded successfully!");
                form.reset();
            } else {
                const errorData = await response.json();
                alert("Upload failed: " + (errorData.message || "Something went wrong"));
            }
        } catch (error) {
            console.error("Error:", error);
            alert("An error occurred while uploading the course.");
        }
    });
</script>
</body>

<footer>
    <div class="footer-content">
        Copyrights &copy; 2024, All Rights Reserved
    </div>
    <div class="footer-links">
        <a>  <img src="https://img.icons8.com/?size=100&id=cHNRcWMI2bLJ&format=png&color=000000" alt="mail"> </a>
        <a> <img src="https://img.icons8.com/?size=100&id=CVI48dqUAQYO&format=png&color=000000" alt="whatsapp"> </a> 
        <a> <img src="https://img.icons8.com/?size=100&id=80593&format=png&color=000000" alt="instagram"> </a>
    </div>
</footer>
</html>